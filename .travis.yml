language: java
jdk:
  - openjdk8
deploy:
  provider: releases
  api_key: "$GITAPI"
  file: target/log4j2-jsonevent-layout.jar
  skip_cleanup: true
  on:
    tags: true
    
env:
  global:
  - secure: eEfwJbjCC/ghriOfrPef3P+7kW7GeIhOnV3zJxOLSSH4ZBfT5KTEJTH/KIriv3SWgNUMJU+UAEKi/10eEyorf69AWE60xZpViZGmCYem3Q97F41L79FoG2mBSDAsj9IisqKw9sYiu8JfR1VR4cBmt7AaML+sZtMsTRTWIBiip0w0LiagueLnJOPPfT5smcJjTmJygkHb8pyvBd+gbOk8olpWsNdt5inFaDKQEGBvqf/dxnoukd8If5+t/GvLI2cu0I6s0OpuyOiLQuS5dTo9dOZ0Cj5Ddm4Ap0w55fFueV0RjIJqvfB2LjjG5pMQ9eLF5Hobwgi+rnkohMt6b2feZNZv8lf27tHhR5genwC39yyAhsIJTBMMTKbru+GY1Ejgnf0ouUuxlzFt4vw/IG7jh31GhqQDwydhTsOLWEG+rn9jR2XBrNCOcjbttnHoDatYk/MfsoySe1LRZyH7i6a8ZxlsBulVIBP8LDpRAoHysgC7ANZUwrlorC2MhodfP3H/PybAfGl/fRPFDphSSjP7MAuBx/CjkP3foPKJ7nc5/Lnbp85AmYFnHEjVUG9XtUyFNY32mwYpjGTYU1PtMRwcJ6hBLvcvPrddU5w9Jy3nBfgDGpFQpJ1ZeFs6LoTQZCTBXoZuh5eYmi91YrixgZ5NSnnF7vWvy0msHwdnL/DomSQ=
  - secure: SHkbJIM6cTtijNJ7NVneSLBTGZEoVfbPKzTElVE0McMoQ06goOBKLQDeY5OOiIogDU5WJDPBq8tUq+0bjUXPDXaP/cc1vrpJAaaOvHjT2Ez4NZ82AfnrcQa5E/RFRqwARkDgIVh00QkGBYWKYdUJ67f383L5dXbfEd2fo8jwwRJWl0RzuYHjTv1cXODSApibNLVdiNoGI0610rJrWxwH5kpVlq96iWiN8lgMVOlDFz5r3QipeXMLwFqRM+Fh+XSngaMaF+x+FV84CLXjCuzXzbs9qDOln0JC3E7gXiJHfrTFipVLw4Jdiop5yVfrIrYdEp93UOf7FMYJszFqXI7q51z4I5rMVeGhncViZzdPxzhJe+swCvLdU7X/i7rra7xuJScA/2O/o2+35mjVFp5s4E9LMQNE1yfIXF9Ego68p9co/tz+K3PEAmEY6BPoR37yE9rovHwQy6MqAYyt+aE1aOsFuonrh3npFrJiw9m/ovRpSPMLyeGaot3ERH+7fLt1Lpk9+/FKEQSDQAB7v2QnE8Cb49zsvhl4sJNcZfknjG3txHBjyJw3enY1JD6eRSQBAmpWOOJdR7hZVw4etmFdMDV5ahWekRNrzooTCU2uE6SCw9mNq2JKXuMGZXI31C/36D2PMyIXx93FQj8A8LbYbA+4P9ip5Nf6z7m/P9/JfDE=
  - secure: koMmf+TchumTHKspSoySBMFfbLlv2h9/F+l1KrMImio83KLPtm6kJ5BS/ySa4kqfio0+cSpjgirQSCmuRn/EjMBE0qIuvBgspv0ks76VoaIsT5Ujwfv9WGTh+vZKJhw9rq6qixo+PeKrkpbXelIPdp1kypvdpSpGhSEn7f4wDPpw0m+erB2U3VuTLDHfsQJySW9DEpTQLQWfzb02dD81/pMylvKRO46MBGVuIvYrhdel/a7K3PMDEUEn08DO3D4z72PBIqK3tiwqs+ffzRVP9wXmqkyDa4sWW7pxhyOgQB4OF31Nm7UL+E52XvoNigibcKTw0a2G7dPmueD301FE/Henk7HS+yJllpXxYI3BuU4bTWsdkwYNInEwVLwCG+jbAm9XuymNu6hABU5xuHFzWKCZZqDo036+ZO8Trz9FtmY5EV1YdhzRsYAcGk2p9scDhpTdRYtrMdUQ2kQbnrkHB61k+iAvXVeCo5W4CmrOKCn+x29wc0C2Z3F7jExLjRcPtZ2DpdFTBOUvYJiNBq1xp1SgjYloJ5H32Cg29WTrx+vl4r6cyDGichpx0SJHYmdC/EZ5cmVcqoQc0pLjPktVmVeYuzyBbTtepgLQJluVtHACg3hzohO0BtnDTSJfY4+neQTtwEUEsQzJyL+ba1wgdegA3spt3gTQLtqqj7NJ5us=
  - secure: WREk98wNXgcE91IW6Z+rwNoxjNbbqDqQ4whlvzCE+EKmmeMThMl+GGSPRvM8dLd7axnmn96c7owfdNyGUbieGnXpCg1b0ji4LuygE3uGyLCnw9iO07G2DSIceWiz5smWIo7J5WLc36HCViOAxcsY55NoQqTkR9b42LKJFsPm9tVZXZMSdZrePFa6ek9y9FkqPTXSYMuN3n/3bs9+6xcERk0aFBj5BeghaoyLVvaaiiw8OiqYFaHR2AOrmex/tEUDZt3aWsN5qUAI3RxgI1iRUL91V9x4+mgrx4LjaScASE7bY9TGMl1tCUeauOv3eBFqv2HoxpvvczaVhBbRaDwDNcbyBcE08DZx+tFlyH7U0acUjT3atB7+SbMGRc7De/uRMSmlRNX6BorW6meAHzrGRiWZTNUWjHGAvPpheZrxgeuwpiy4XrR/Ah89RJLtRgHVjeH9Z1Nk371OUdBY1mCEAlWOlQze1Lq/mLXahe5m+73xexz8yo5wMBqhWIMFHbdsQ1clalt3F2hzUM1aIkB/EyoB34KwUwWfoAxSLNzA7EIQIO8l2Cg1SXecnHd0PmAzrRfmJvIMSk/YsUROj3AkrFoOegG+2/4sSOpcAPa1e0UyEtCN0fsAIZrPK4l+snh2wBw8u+hqrzUf6dn5OHFpur0jzQIXwvXUTqAl6NunmFA=

install: mvn install -P !build-extras -DskipTests=true -Dmaven.javadoc.skip=true -B -V
script: mvn test -P !build-extras -B
cache:
  directories:
  - "~/.m2/repository"
after_success:
- "./deploy/deploy.sh"
